# web\_service

## Назначение

Веб-интерфейс на Streamlit для объединения всех микросервисов в единую интерактивную панель управления. Позволяет запускать и управлять сервисами анализа объемов, линейек, парсерами наименований, а также проверками торговых точек — через единый графический интерфейс.

## Установка и запуск

```bash
pip install -r requirements.txt
streamlit run main.py
```

## Описание интерфейса

Streamlit-интерфейс предоставляет боковое меню с выбором одного из следующих микросервисов:

* **Обработка объемов** — вызывает API `GET /volumes` микросервиса на порту `8080`.
* **Обработка линеек** — вызывает API `GET /lines` на порту `8081`.
* **Парсер наименований ДМ** — вызывает `GET /detskiy_mir` на порту `8082`.
* **Парсер Globus** — вызывает `GET /globus` на порту `8083`.
* **Проверка пустых ТТ** — вызывает `GET /tts` на порту `8084` с передачей списка путей.

Каждый раздел включает:

* Выбор сети из файла `file_paths.json`.
* Передачу параметров в backend-сервис через HTTP GET.
* Отображение статуса ответа.
* Кнопку для скачивания сгенерированного Excel-файла.

## file\_paths.json

Файл конфигурации для определения доступных справочников и их принадлежности к сегменту (online / offline):

```json
{
  "files": [
    {
      "name": "WB_1",
      "path": "\\xx.x.x.xx\\аналитики\\pbi\\продажи\\wb\\СправочникиПОЛН_1.xlsx",
      "segment": "online"
    },
    {
      "name": "X5",
      "path": "\\xx.x.x.xx\\аналитики\\PBI\\ПРОДАЖИ\\X5\\СправочникиПОЛН X5.xlsx",
      "segment": "offline"
    }
  ]
}
```

## Структура приложения

* `volumes` (порт `8080`)
* `product_lines` (порт `8081`)
* `detskiy_mir_parser` (порт `8082`)
* `globus_parser` (порт `8083`)
* `check_tt` (порт `8084`)

## Примечания

* Все сервисы должны быть запущены локально на соответствующих портах.
* Файл `file_paths.json` должен быть размещен в директории проекта.
* Используются HTTP-запросы через библиотеку `requests`.
* Интерфейс написан с использованием Streamlit и позволяет интерактивно управлять загрузкой и обработкой данных.

## Зависимости

Основные библиотеки:

* streamlit
* pandas
* requests
* json
* openpyxl

Полный список в `requirements.txt`.
